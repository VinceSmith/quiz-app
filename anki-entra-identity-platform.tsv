Front	Back	Tags
What is the Microsoft identity platform (high level)?	A set of endpoints, libraries (MSAL), and tooling in Microsoft Entra ID that lets apps authenticate users (OIDC) and acquire tokens (OAuth 2.0) to call protected APIs like Microsoft Graph or your own. Key pillars: app registrations, protocols, tokens, consent/permissions, and libraries.	entra/overview
Which app objects exist in Entra ID for an application integration?	Two core objects: Application object (global, tenant-agnostic definition of app, app roles, permissions, redirect URIs) and Service principal (tenant-local instance used for policy, consent, assignment). SPs exist per tenant where the app is used.	entra/app-model
What determines whether an access token is intended for your API?	The audience (aud) claim must match your API’s App ID URI (or application ID URI). Your API must validate aud and other claims; clients should treat access tokens as opaque.	entra/tokens/access entra/tokens/validation
What’s the difference between v1.0 and v2.0 tokens?	v1.0 vs v2.0 control claim formats and audiences; selected by the resource via accessTokenAcceptedVersion in the app manifest: null/1 => v1.0, 2 => v2.0. You can get a v2 token from the v1 endpoint if the resource accepts v2.	entra/tokens/access
Default access token lifetime and why it varies?	Typically randomized between 60–90 minutes to spread load and improve resilience. CAE/SIF and CTL can influence effective behavior; clients use refresh tokens to renew.	entra/tokens/lifetimes entra/security-resilience
When should a client validate an access token?	Clients generally shouldn’t. Access tokens are for APIs to validate. Clients should cache by using expires_in and scope from the token response and avoid parsing tokens.	entra/tokens/validation
What must a web API validate on access tokens?	Signature (via OIDC jwks_uri), issuer (iss), audience (aud), expiration (exp/nbf), and tenant scoping (tid). Use tenant-specific or tenant-independent metadata with issuer rules; handle key rollover.	entra/tokens/validation
What’s the well-known OIDC configuration URL pattern?	{authority}/.well-known/openid-configuration (for v2: {authority}/v2.0/.well-known/openid-configuration). Example: https://login.microsoftonline.com/common/v2.0/.well-known/openid-configuration.	entra/endpoints-metadata entra/protocols/oidc
How do you enable ID tokens for an app?	In App registrations > Authentication: add platform and select “ID tokens” (implicit and hybrid flows), or set oauth2AllowIdTokenImplicitFlow=true in the manifest (legacy). Without it, requesting id_token yields unsupported_response error.	entra/protocols/oidc entra/apps/app-model
Which OIDC request params are required for sign-in?	response_type=id_token, scope=openid, nonce=... Plus tenant-specific authority, client_id, redirect_uri, response_mode (form_post recommended for web apps), and state.	entra/protocols/oidc
What is nonce in OIDC and how is it used?	A cryptographically random string the client generates and sends; the ID token includes the same nonce. The client must verify it to prevent replay.	entra/protocols/oidc
Where is the OIDC UserInfo endpoint in Entra?	userinfo_endpoint is exposed via the OIDC configuration; for Entra it’s hosted on Microsoft Graph at https://graph.microsoft.com/oidc/userinfo. Request a token with openid profile email to call it.	entra/protocols/oidc entra/tokens/access
How do you sign a user out?	1) Redirect to end_session_endpoint (logout) with optional post_logout_redirect_uri; 2) Clear your app’s session/cookies. For single sign-out, implement front-channel logout URL and respond 200 after clearing sessions.	entra/protocols/oidc
What apps should use the OAuth 2.0 auth code flow with PKCE?	SPAs (with spa redirect type + CORS), server-side web apps, desktop and mobile apps. Avoid implicit; use code+PKCE for modern clients.	entra/protocols/oauth2/auth-code
Why does a SPA need the ‘spa’ redirect URI type?	To allow cross-origin token redemption and CORS at the token endpoint. Without it, you’ll see CORS errors; SPAs must not use client secrets.	entra/protocols/oauth2/auth-code
Which parameters are key in the /authorize request (auth code flow)?	client_id, response_type=code (optionally id_token for hybrid), redirect_uri, response_mode, scope (can span multiple resources), state, PKCE parameters (code_challenge, code_challenge_method=S256), and optional prompt/login_hint/domain_hint.	entra/protocols/oauth2/auth-code
What is the hybrid flow in Entra ID?	Requesting an ID token along with the authorization code (response_type=code id_token), adding OIDC scopes and nonce. Useful to render UI while redeeming code server-side.	entra/protocols/oauth2/auth-code
When redeeming the auth code at /token, what must you send?	client_id, grant_type=authorization_code, code, redirect_uri (must match), code_verifier (if PKCE used—recommended/required for SPAs), plus client_secret or client_assertion only for confidential clients.	entra/protocols/oauth2/auth-code
Best practice: client secret vs certificate for confidential clients?	Prefer certificate credentials (private_key_jwt) over shared secrets for stronger security and rotation. Register cert in app registration and send client_assertion JWT at /token.	entra/security-resilience entra/protocols/oauth2/auth-code
What is Continuous Access Evaluation (CAE)?	A capability that evaluates access in near real-time; token lifetime variation still applies. Apps should handle mid-flight challenges and rely on libraries (MSAL) for resiliency.	entra/security-resilience entra/tokens/lifetimes
Refresh tokens behavior and 24h limit for SPAs?	SPAs get refresh tokens expiring ~24 hours; require interactive renewal daily due to third-party cookie privacy. Other app types get longer-lived RTs, but expect rotation and invalidation.	entra/tokens/refresh entra/protocols/oauth2/auth-code
On-behalf-of (OBO) flow: when and why?	Used by a web API to exchange a user’s incoming token for a downstream API token, preserving user identity/delegation across tiers. Initiated at /token with grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer.	entra/protocols/oauth2/obo
Client credentials flow: when to use?	For daemon/background or server-to-server scenarios without user context. The app uses its own identity to get tokens for APIs that expose application permissions (app roles).	entra/protocols/oauth2/client-credentials
Device code flow: when to use?	For devices with limited input (TVs, CLI). User authenticates on a secondary device. Pair with PKCE-capable libs when possible; avoid embedding secrets.	entra/protocols/oauth2/device-code
ROPC: should you use it?	Avoid. Resource Owner Password Credentials is discouraged due to UX and security; lacks modern controls and breaks federated flows. Prefer auth code with PKCE or device code.	entra/protocols/oauth2/ropc
What are optional claims and how are they used?	API/resource can request extra claims in tokens (e.g., upn, groups) via optional claims configuration; client requests scopes, resource controls claim issuance.	entra/tokens/claims
How to add custom claims?	Use custom claims mapping or custom extensions; for complex cases, custom claims providers or API enrichment. Be mindful of token size limits and privacy.	entra/tokens/claims
Which errors are common at /authorize?	invalid_request, unauthorized_client, access_denied, unsupported_response_type, server_error, temporarily_unavailable, invalid_resource, login_required, interaction_required. Client action varies: fix params, request consent, or retry.	entra/protocols/oauth2/auth-code entra/protocols/oidc
Which errors are common at /token?	invalid_request, invalid_grant, unauthorized_client, invalid_client, unsupported_grant_type, invalid_resource, interaction_required, temporarily_unavailable, consent_required, invalid_scope. Inspect error_description, trace_id, correlation_id.	entra/protocols/oauth2/auth-code
How do you validate token signatures and keys?	Use OIDC metadata’s jwks_uri; select key by kid, validate RS256 signature; auto-refresh keys daily. If custom signing keys (claims-mapping), use appid parameter to fetch correct jwks.	entra/tokens/validation entra/endpoints-metadata
Issuer validation for multi-tenant apps?	When using common/organizations authority, replace {tenantid} template with token tid and compare to iss; also ensure tid is a GUID; validate signing key issuer matches.	entra/tokens/validation
What is the difference between consent and permission?	Permissions/scopes define what access is requested. Consent is the user/admin approving those permissions for a client app. Delegated permissions require a user; application permissions require admin consent.	entra/consent-permissions
What’s the ‘signInAudience’ and why does it matter?	It defines who can sign in: AzureADMyOrg, AzureADMultipleOrgs, AzureADandPersonalMicrosoftAccount, etc. Must align with endpoints used (common/organizations/consumers) and app’s audience.	entra/tenancy
National cloud considerations?	Authority and endpoints vary per cloud (Azure public, GCC, GCC High, China). Use correct base domain (login.microsoftonline.com vs login.chinacloudapi.cn). Configure libraries appropriately.	entra/endpoints-metadata
Scopes in OIDC vs OAuth 2.0?	openid/profile/email are OIDC identity scopes; resource scopes like https://graph.microsoft.com/User.Read are OAuth 2.0 permissions. Include openid for ID tokens; include resource scopes for API access.	entra/protocols/oidc entra/protocols/oauth2/auth-code
When to use response_mode=form_post?	For web apps to securely receive tokens/codes on server-side; avoids fragment issues where browsers don’t send fragment to server.	entra/protocols/oidc entra/protocols/oauth2/auth-code
Front-channel logout: what must apps do?	Register the front-channel logout URL and implement an endpoint that clears sessions and returns 200 upon GET from Entra during single sign-out.	entra/protocols/oidc
Handling groups in tokens?	Use group overage claims (hasgroups) and Graph calls for large memberships; consider using app roles/role assignments to avoid large token size.	entra/tokens/claims
MSAL vs hand-rolled protocol calls?	Prefer MSAL for correctness (PKCE, CAE, caching, retries). Hand-rolled calls are for reference/testing only; production should use MSAL or Microsoft.Identity.Web.	entra/msal
What data should a client cache from token responses?	expires_in, scope, refresh_token (if present), and id_token (if needed for UX claims). Don’t parse access token; treat as opaque.	entra/tokens/access entra/tokens/refresh
What’s audience (aud) vs scope in access tokens?	Aud identifies the resource API; scope lists permissions granted on that token for that resource. APIs enforce authorization primarily on scopes/roles and sometimes other claims.	entra/tokens/access
PKCE: what are code_challenge and code_verifier?	code_verifier is a high-entropy secret created by the client; code_challenge is its derived value (S256 recommended) sent to /authorize. Later, client proves possession by sending code_verifier to /token.	entra/protocols/oauth2/auth-code
What is offline_access?	An OAuth scope that requests a refresh token so the client can get new access tokens without re-prompting the user. Required for web/native apps; SPAs have special 24h RT behavior.	entra/protocols/oauth2/auth-code entra/tokens/refresh
Tenant-independent metadata: when to use?	For multi-tenant apps validating tokens from many tenants; use common/organizations metadata and validate iss and signing key issuer using tid substitution.	entra/endpoints-metadata entra/tokens/validation
Token replay protections to implement?	Validate nonce (ID tokens), state (CSRF), pair code_verifier with code (PKCE), bind cookies to SameSite/Lax/Strict as appropriate, store RTs securely server-side, rotate RTs.	entra/security-resilience
Error triage essentials from error responses?	Look at error, error_description, error_codes, trace_id, correlation_id, timestamp. Map to actionable steps: fix request vs prompt for consent vs retry vs interactive auth.	entra/troubleshooting
Handling CORS and third-party cookie limits for SPAs?	Use spa redirect URIs, rely on MSAL’s iframe/top-level navigation strategies; expect daily interactive auth in browsers without third-party cookies.	entra/protocols/oauth2/auth-code entra/security-resilience
Why should clients not validate access tokens?	They’re meant for APIs; clients lack resource-specific rules and may mis-validate, leading to confused-deputy risks. Rely on token response metadata for caching instead.	entra/tokens/access entra/tokens/validation
How should an API handle token key rollover?	Regularly refresh jwks keys (e.g., every 24h), match by kid, handle 401 with retry after refresh, and be resilient to multiple valid keys during transition.	entra/security-resilience entra/tokens/validation
What are delegated vs application permissions?	Delegated permissions act on behalf of a signed-in user (scopes). Application permissions are app-only (roles) without user context; require admin consent and confidential client.	entra/consent-permissions
How are permissions exposed by an API?	Define scopes (delegated) and app roles (application) in the API app registration (app manifest or UI). Clients request them; admins/users consent.	entra/consent-permissions entra/apps/app-model
What is admin consent and when is it required?	When a requested permission is marked admin-only (e.g., Graph Directory.ReadWrite.All) or for app roles. A tenant admin must grant consent.	entra/consent-permissions
What is the publisher verification badge?	A mark indicating the app publisher has verified their domain; increases trust and may be required for multitenant consent experiences.	entra/consent-permissions
How do app roles differ from groups?	App roles are assignments to the service principal for the app, tailored to app authorization; groups are directory constructs and can be large/overage.	entra/apps/app-model entra/tokens/claims
Where are reply URLs (redirect URIs) configured?	In App registrations > Authentication. Must exactly match (URL-encoded on the wire). SPAs must use type=spa.	entra/apps/app-model entra/protocols/oauth2/auth-code
What is the Application ID URI?	The identifier for your API (e.g., api://{app-id} or a verified domain URI). It becomes the aud for tokens issued to your API.	entra/apps/app-model
How do service principals relate to external tenants?	Each tenant that uses your multitenant app has its own service principal instance with local policy (assignments, conditional access, etc.).	entra/apps/app-model entra/tenancy
Single-tenant vs multitenant apps?	Single-tenant apps accept accounts in one directory; multitenant apps accept accounts in any directory (and optionally personal accounts).	entra/tenancy
What does signInAudience control?	Who can sign in: AzureADMyOrg, AzureADMultipleOrgs, AzureADandPersonalMicrosoftAccount, etc. Must be consistent with endpoints used.	entra/tenancy
Which authorities correspond to audience?	common (any org + MSA), organizations (any org), consumers (MSA only), or a specific tenant ID/domain for single-tenant.	entra/endpoints-metadata entra/tenancy
How do national clouds alter authorities?	Base domain changes (e.g., login.chinacloudapi.cn). Validate OIDC metadata per cloud; Graph endpoint base also differs.	entra/endpoints-metadata
What is the ‘state’ parameter for?	Opaque value to prevent CSRF and preserve app state across redirects; must be validated on return.	entra/protocols/oidc entra/protocols/oauth2/auth-code
What is c_hash (hybrid flow)?	A hash of the authorization code included in the ID token when using hybrid flow; helps bind code to the id_token.	entra/protocols/oauth2/auth-code entra/protocols/oidc
When is response_mode=fragment problematic?	For server-rendered apps because fragments aren’t sent to servers; prefer form_post.	entra/protocols/oauth2/auth-code
What is prompt=none used for?	Attempt silent auth without UI. If not possible, returns interaction_required or login_required.	entra/protocols/oidc entra/protocols/oauth2/auth-code
What are login_hint and domain_hint?	Hints to streamline home realm discovery and prefill username or direct to federated IdP; improves UX.	entra/protocols/oidc
How does the device code flow work?	Client gets a device_code and user_code; user visits verification URL on another device to authorize; client polls for token until authorized or expires.	entra/protocols/oauth2/device-code
OBO flow token request essentials?	grant_type=urn:ietf:params:oauth:grant-type:jwt-bearer, requested_token_use=on_behalf_of, assertion=<incoming JWT>, scope/resource for downstream API.	entra/protocols/oauth2/obo
Client credentials best practices?	Use certificates (private_key_jwt), rotate regularly, least-privileged app roles, and store secrets in HSM/Key Vault.	entra/protocols/oauth2/client-credentials entra/security-resilience
ROPC limitations with federated identities?	Fails when user is federated to external IdP (e.g., ADFS) or requires MFA/challenges; breaks modern security and UX.	entra/protocols/oauth2/ropc
ID token vs access token intended audience?	ID token’s aud is the client app; access token’s aud is the resource API. Don’t use ID token to call APIs.	entra/tokens/id entra/tokens/access
Which core ID token claims should apps rely on?	iss, aud, sub, iat, nbf, exp, nonce, tid, oid/preferred_username; avoid upn/email as stable identifiers across tenants.	entra/tokens/id entra/tokens/validation
What are optional claims (profile/email/upn)?	OIDC identity claims clients may request; issuance controlled by resource or directory config; may be absent based on policy.	entra/tokens/claims
How to handle group overage?	If groups exceed limit, token has hasgroups=true and no groups list. Client must call Graph to resolve group memberships.	entra/tokens/claims
What is Continuous Access Evaluation (CAE) impact on tokens?	Tokens can become invalid mid-flight based on risk/sign-in changes; library handles 401/claims challenges to reauthorize.	entra/security-resilience entra/tokens/lifetimes
What are claims challenges?	API can return WWW-Authenticate with claims to force reauth/step-up (e.g., MFA); MSAL interprets and acquires a new token with additional claims.	entra/security-resilience entra/msal
Which token header fields pick the key?	alg (e.g., RS256) and kid to select the JWK from jwks_uri; use kid, not x5t for v2 tokens.	entra/tokens/validation
How often to refresh JWKS?	About every 24 hours, or on validation failure with unknown kid; cache with respect to cache-control headers.	entra/tokens/validation entra/security-resilience
What is aud claim misuse risk?	Accepting tokens where aud isn’t your API leads to the “confused deputy” problem; always enforce aud.	entra/tokens/validation
How does MSAL help with PKCE and CAE?	Automatically sets PKCE, caches tokens, interprets CAE challenges, and handles retries; reduces protocol errors.	entra/msal
Public vs confidential clients?	Public clients can’t keep secrets (SPAs, native/mobile). Confidential clients can (web apps, daemons) and use client secrets/certificates.	entra/msal entra/protocols/oauth2/auth-code
How to choose redirect URIs for native apps?	Use https://login.microsoftonline.com/common/oauth2/nativeclient or loopback http://localhost URIs; don’t use custom schemes unless library supports.	entra/protocols/oauth2/auth-code
SameSite cookie changes impact?	Browser defaults can break server sessions and silent auth if misconfigured; set cookie attributes appropriately and follow guidance.	entra/security-resilience entra/troubleshooting
Third-party cookies and SPAs?	Blocking third-party cookies prevents silent iframe auth; require top-level navigation or popup for refresh at least once per ~24h.	entra/protocols/oauth2/auth-code entra/security-resilience
What is claims mapping customization?	A feature to inject custom claims from directory/on-prem into tokens; may require custom signing keys and appid-specific JWKS.	entra/tokens/claims entra/tokens/validation
How to request admin consent programmatically?	Use admin consent endpoint with tenant admin, or the Azure portal Enterprise Apps permission grant flow.	entra/consent-permissions
How do you restrict an app to certain users?	Use assignment required on the enterprise app and assign users/groups or app roles accordingly.	entra/apps/app-model entra/security-resilience
What is the Entra application manifest?	JSON document describing app (redirect URIs, permissions, roles, optional claims, accessTokenAcceptedVersion, etc.).	entra/apps/app-model
Scopes model in v2 endpoints?	Scopes are resource-scoped strings like api://app-id/.default or https://graph.microsoft.com/User.Read; clients must request per resource.	entra/protocols/oauth2/auth-code
What is .default scope?	Resource-specific scope that maps to all static permissions configured on the client for that resource; often used with client credentials.	entra/protocols/oauth2/client-credentials entra/consent-permissions
What is incremental consent?	Request additional scopes over time; MSAL merges previously granted scopes for the same resource.	entra/consent-permissions entra/msal
When to use SAML with Entra ID?	For legacy enterprise apps expecting SAML SSO; Entra can issue SAML tokens and support SAML SSO/Single Logout.	entra/protocols/saml
SAML claims customization basics?	Map directory attributes to SAML attributes; can include transformations; token format differs from JWT.	entra/protocols/saml entra/tokens/claims
SAML vs OIDC selection criteria?	OIDC/OAuth for modern apps/APIs and mobile/SPAs; SAML for older enterprise SaaS integrations needing SSO only.	entra/protocols/saml entra/protocols/oidc
What is token exchange (SAML ↔ OAuth)?	Bridge scenarios where a SAML assertion is exchanged for OAuth token or vice versa; specialized flows apply.	entra/protocols/saml entra/protocols/oauth2
Which errors imply consent or admin needed?	consent_required on /token or access_denied on /authorize often indicate missing consent or admin-only scope.	entra/troubleshooting entra/consent-permissions
Which errors imply interactive auth needed?	interaction_required or login_required; retry /authorize without prompt=none.	entra/troubleshooting entra/protocols/oauth2/auth-code
What is the tid vs oid?	tid is tenant ID (GUID); oid is the object ID of the user/service principal in the tenant; sub is subject identifier per issuer.	entra/tokens/id
Preferred_username vs upn?	preferred_username is a display-like login; upn can change and might not exist for MSAs; avoid as stable key across tenants.	entra/tokens/id
Profile and email scopes behavior?	Requesting profile/email may populate claims in ID token and UserInfo; not guaranteed if policy restricts.	entra/protocols/oidc entra/tokens/claims
Why should APIs avoid parsing tokens from other resources?	Different validation rules and claim contracts; accept only tokens where aud matches your API.	entra/tokens/validation
What is token binding to client?	PKCE for public clients, mutual-TLS or DPoP/POP tokens where supported; reduces token theft impact.	entra/security-resilience
How to configure CORS for SPA auth code?	Mark redirect URIs as type=spa; token endpoint enforces Origin header; don’t use client secrets from browser.	entra/protocols/oauth2/auth-code
What is the Entra OIDC end_session_endpoint?	Endpoint to trigger sign-out and optionally front-channel logout to other apps; use post_logout_redirect_uri.	entra/protocols/oidc
What are consent experiences for multitenant apps?	User consent, admin consent, and consent workflow vary by policy; publisher verification improves trust experience.	entra/consent-permissions entra/tenancy
How do you expose an API to other tenants?	Set signInAudience to multiple orgs, define scopes/roles, configure App ID URI, and document consent process.	entra/apps/app-model entra/tenancy
What is enterprise app role assignment?	Assign app roles to users/groups on the service principal to control app authorization.	entra/apps/app-model
Conditional Access effects on tokens?	CA can enforce MFA, device compliance, sign-in frequency; can trigger claims challenges and shorten effective sessions.	entra/security-resilience
How to handle token caching securely?	Cache tokens server-side in confidential clients; for SPAs/native rely on MSAL caches and OS-protected storage; never log tokens.	entra/security-resilience entra/msal
Why is implicit flow discouraged?	Tokens in URL fragments, no PKCE, increased attack surface; auth code with PKCE supersedes implicit for SPAs.	entra/protocols/oauth2/auth-code
What is the Graph UserInfo endpoint scope?	Use openid profile email; additional Graph scopes (e.g., User.Read) are unrelated unless you call Graph APIs directly.	entra/protocols/oidc entra/tokens/access
How do you validate exp, nbf, iat safely?	Allow small clock skew, reject tokens outside validity window, and prefer library defaults.	entra/tokens/validation
What is kid collision handling?	If kid not found, refresh JWKS; if multiple matching keys exist, try each; cache per kid; handle transient rollover windows.	entra/tokens/validation entra/security-resilience
What is response_type=token use today?	Legacy implicit for access tokens; avoid in new apps. Prefer code+PKCE.	entra/protocols/oauth2/auth-code
How to migrate from ADAL to MSAL?	Follow migration guidance; update auth endpoints to v2, replace ADAL APIs with MSAL equivalents, and test consent/scopes.	entra/msal
What is organizations vs common authority difference?	organizations excludes MSAs; common includes both MSAs and org accounts.	entra/endpoints-metadata entra/tenancy
How do you request downstream scopes in OBO?	API requests scopes/roles for the next API; the user must have consent/admin approval for those permissions.	entra/protocols/oauth2/obo entra/consent-permissions
What is the /.well-known/openid-configuration appid parameter for?	When custom signing keys are used, add appid to fetch app-specific JWKS for validation.	entra/endpoints-metadata entra/tokens/validation
How does MSAL select account silently?	Uses cache and account identifiers (homeAccountId, localAccountId, tenantId) and falls back to interactive if needed.	entra/msal
How to avoid over-scoping?	Request least privilege; use incremental consent; split scopes by feature.	entra/consent-permissions
When do tokens include roles?	When client requests your API and the assignment has app roles; roles claim appears for application permissions, and for delegated roles when configured.	entra/tokens/claims entra/apps/app-model
How to interpret scope vs roles in tokens?	scope claim lists delegated permissions; roles claim lists app roles (application or delegated roles assigned).	entra/tokens/claims
What is the effect of accessTokenAcceptedVersion?	Controls token format v1 vs v2 issued for your API; adjust validation/claims expectations accordingly.	entra/tokens/access
Can you request tokens for multiple resources at /token?	No. Token redemption is for one resource; for multiple, repeat the flow or use on-behalf-of patterns.	entra/protocols/oauth2/auth-code
What’s the difference between consent on /authorize vs /token?	Consent is granted during /authorize. /token may return consent_required if scope wasn’t granted for redemption.	entra/consent-permissions entra/troubleshooting
How to configure app branding and TOS/Privacy?	Provide branding and links in app registration; improves consent UX and compliance.	entra/apps/app-model
How to lock app properties?	Use application instance property locks to prevent unapproved changes in enterprise app configurations.	entra/apps/app-model entra/security-resilience
How to mark app as publisher verified?	Verify DNS for publisher domain and associate it with the app registration; obtain the blue badge.	entra/consent-permissions entra/apps/app-model
Which claims are stable user IDs?	sub within issuer, oid within tenant; combine with tid for cross-tenant stability; avoid email/UPN as keys.	entra/tokens/id
When to call Graph vs rely on token claims?	Call Graph for dynamic data (groups when overage, profiles), or when claims aren’t present due to optional claim settings.	entra/tokens/claims
What is token nbf claim?	Not-before; token must not be accepted before this time; handle clock skew.	entra/tokens/validation
How to handle CAE 401 with WWW-Authenticate?	Let MSAL process the challenge and acquire a new token; for custom clients, parse claims and re-run /authorize.	entra/security-resilience entra/msal
What is user_impersonation scope?	A common delegated scope name for custom APIs indicating basic delegated access; authorization still enforced by API.	entra/consent-permissions entra/tokens/claims
When to use form_post on localhost?	For web apps during development to deliver code/ID token securely to server; recommended by docs.	entra/protocols/oauth2/auth-code
What is response_mode=query default for?	Authorization code only requests. When requesting id_token, default is fragment; prefer form_post for servers.	entra/protocols/oauth2/auth-code entra/protocols/oidc
How to configure supported account types?	Set during app registration (who can use this application); affects authority/tenant selection.	entra/tenancy entra/apps/app-model
What is forbidden in SPA token redemption?	Using client_secret; also forbidden to use non-spa redirect URIs without Origin header.	entra/protocols/oauth2/auth-code
How to handle token audience mismatches?	Return 401 with WWW-Authenticate indicating expected audience; never accept mismatched aud.	entra/tokens/validation
What is application consent experience page?	The consent UI that displays requested permissions, publisher info, and organization context; influenced by branding and verification.	entra/consent-permissions
How to test auth end-to-end?	Use test tenants, test users, and integration tests; leverage MSAL test utilities and environment setup guides.	entra/troubleshooting
Which scopes grant refresh tokens?	offline_access plus openid in code flow for web/native; SPAs have special RT handling with 24h policy.	entra/tokens/refresh entra/protocols/oauth2/auth-code
How to revoke refresh tokens?	Server-driven via CA or account sign-out; clients should handle refresh token invalid_grant and reauthenticate.	entra/tokens/refresh entra/security-resilience
What is token ‘ver’ claim?	Token version (1.0 or 2.0); informs which metadata and claim formats to expect.	entra/tokens/access
How to consume id_token in native/SPAs?	For UX and display only; don’t use for authorization decisions in clients; APIs must enforce with access tokens.	entra/tokens/id
How to call downstream APIs from web app?	Acquire on-behalf-of token in the web API layer or have web app call web API which calls downstream with OBO; never pass user tokens to client.	entra/protocols/oauth2/obo
What is scope/resource on /token?	For v2 endpoints, use scope for desired resource; for v1 endpoints, resource parameter; MSAL manages this.	entra/protocols/oauth2/auth-code entra/msal
How to use incremental consent with MSAL?	Call acquireTokenInteractive with additional scopes; MSAL merges previously granted scopes.	entra/msal entra/consent-permissions
What’s the error for CORS without SPA redirect?	invalid_request with message about cross-origin token redemption only for SPA client-type; fix redirect URI type.	entra/troubleshooting entra/protocols/oauth2/auth-code
How to request app roles in client credentials?	Use scope=.default and ensure app roles assigned to the client service principal; resulting token has roles claim.	entra/protocols/oauth2/client-credentials entra/tokens/claims
What is domain_hint=organizations/consumers value?	Optimizes sign-in by bypassing email discovery; organizations routes to AAD, consumers to MSA.	entra/protocols/oidc
Why is email claim unreliable?	May be absent or unverified; varies by tenant policy and account type; don’t use as key.	entra/tokens/claims
How to validate issuer with common metadata?	Replace {tenantid} with tid from token, then compare to iss; also ensure signing key issuer matches template.	entra/tokens/validation entra/endpoints-metadata
How to choose between app roles vs scopes for internal apps?	Scopes for delegated user actions; app roles for application-only and role-based authorization. Use both as needed.	entra/consent-permissions entra/apps/app-model
What is the ‘kid’ rotation strategy?	Maintain a mapping cache; if signature fails due to unknown kid, refresh JWKS and retry validation before rejecting.	entra/security-resilience entra/tokens/validation
Should clients store tokens in localStorage?	Avoid. Prefer memory with refresh on navigation, or MSAL’s storage strategies; protect against XSS.	entra/security-resilience entra/msal
How to avoid double-consent prompts?	Request combined scopes per resource where possible; reuse existing accounts and cached tokens via MSAL.	entra/consent-permissions entra/msal
What is the relationship of tid and issuer in validation?	iss must be of the form https://login.microsoftonline.com/{tid}/v2.0 where tid equals the token’s tid claim.	entra/tokens/validation
What does response_type=code id_token token mean?	Legacy hybrid with implicit; not recommended. Prefer code+PKCE.	entra/protocols/oauth2/auth-code
How to configure token lifetimes today?	Prefer CA Sign-in Frequency and rely on default lifetime variation or CTL policies when applicable.	entra/tokens/lifetimes entra/security-resilience
What is ‘nbf > exp’ anomaly handling?	Treat as invalid token; such tokens should be rejected; handle clock skew but not paradoxical values.	entra/tokens/validation
How to pass custom state safely?	Encode and sign/encrypt state if it contains sensitive data; at minimum, validate and bind to session.	entra/security-resilience entra/protocols/oauth2/auth-code
What is account picker behavior with prompt=select_account?	Forces the account selection UI even if SSO session exists; useful for multi-account scenarios.	entra/protocols/oidc
How to secure logout endpoints?	Implement CSRF protection and require GET-only for front-channel; ensure no sensitive state changes based on third-party GETs beyond session clear.	entra/security-resilience entra/protocols/oidc
What is application provisioning vs consent?	Provisioning creates identities/assignments in target apps (SCIM); consent authorizes token issuance; they’re complementary.	entra/consent-permissions
Why avoid parsing tokens in logs?	Tokens are credentials; logging them risks exfiltration; redact Authorization headers.	entra/security-resilience
How to scope tests across national clouds?	Parameterize authority/Graph endpoints and run suites per cloud configuration.	entra/troubleshooting entra/endpoints-metadata
How to model multi-API consent in apps?	Request scopes per resource in /authorize, or use incremental consent as features are accessed.	entra/consent-permissions entra/protocols/oauth2/auth-code
What is aud=api://{app-id} vs URI with domain?	Both can be valid App ID URIs; domain-based requires verified publisher domain; choose one and keep consistent.	entra/apps/app-model entra/tokens/access
How to identify MSA tokens?	consumers tenant or specific MSA tenant ID; iss and tid reflect MSA tenancy; claims differ (no oid).	entra/tenancy entra/tokens/id
What is the correlation_id used for?	For diagnostics across components; share with support or track in logs.	entra/troubleshooting
Trace ID vs Correlation ID?	trace_id is per-request in STS; correlation_id spans client-server correlation for troubleshooting.	entra/troubleshooting
How to use Microsoft.Identity.Web?	AddJwtBearer for APIs and AddMicrosoftIdentityWebApp for web apps; it wires validation/caching and token acquisition for downstream calls.	entra/msal entra/tokens/validation
Why is token audience enforced per API version?	APIs may expose multiple audiences or versions; ensure the token targets the correct audience for the endpoint used.	entra/tokens/validation
How to handle id_token_hint on logout?	Optionally pass id_token_hint to help logout flow; not always required; follow platform guidance.	entra/protocols/oidc
What is jit vs provisioned users effect on claims?	Guest/B2B users may have different claim sets; don’t assume directory attributes equality across tenants.	entra/tokens/claims entra/tenancy
What is SecurityTokenSignatureKeyNotFoundException?	Occurs when kid is unknown or keys rotated; refresh JWKS/config and retry.	entra/troubleshooting entra/tokens/validation
How to constrain token size?	Minimize optional claims, avoid large group membership in tokens, prefer roles or Graph lookups.	entra/tokens/claims entra/security-resilience
What is app-resilience CAE guidance for APIs?	Return 401 with WWW-Authenticate claims to trigger reauth; avoid blanket 500s; handle partial failures gracefully.	entra/security-resilience
How to verify email domain ownership for publisher verification?	Create DNS TXT record for the publisher domain and verify in Entra; then assign domain to app registration.	entra/consent-permissions entra/apps/app-model
How to handle reply URL changes safely?	Plan coordinated deployments; tokens bound to redirect_uri must match exactly; keep old URIs during transitions.	entra/apps/app-model entra/security-resilience
What are standard OAuth grant types supported?	authorization_code, client_credentials, device_code, refresh_token, on_behalf_of (extension), saml-bearer (extension), ROPC (legacy).	entra/protocols/oauth2
Should APIs require specific scopes per endpoint?	Yes. Enforce least-privileged scope/role per route; combine with app roles for admin operations.	entra/consent-permissions entra/tokens/claims
How to avoid prompting for consent repeatedly in multitenant apps?	Use the same client_id/redirect URIs, stable scopes, and rely on tenant-wide admin consent when applicable.	entra/consent-permissions entra/tenancy
